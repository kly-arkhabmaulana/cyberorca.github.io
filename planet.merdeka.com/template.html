<script>
    var domain = parent.window.location.host.split(".")[1];
    var topframe_style_fix = "";

    function topframeFix() {
        switch (domain) {
            case "vemale":
                topframe_style_fix = '\
         <sty' + 'le>\
            body > div:first-of-type{\
              background:none !important;\
            }\
         </sty' + 'le>';
                break;
            case "merdeka":
                topframe_style_fix = '\
         <sty' + 'le>\
            #div-gpt-ad-merdeka-topfrm-oop{\
              background:none !important;\
            }\
           .navbar{\
               margin-bottom:-20px;\
            }\
           .navbar-header {\
               background: #FFF;\
            }\
            #mdk-content {\
               background: #FFF;\
            }\
            #mbreaking-news{\
               display: block;\
               padding: 20px 0;\
               background: #FFF;\
            }\
            #mdk-content{\
               margin-top: -20px;\
            }\
            #mdk-footers{\
               margin-bottom:-5px;\
               padding-bottom:60px;\
            }\
            #mdk-news-detail{\
               background:#FFF;\
            }\
             .box-promo-apps{padding-top: 23px;margin-top: -23px;}\
            #mdk-to-top{padding-top: 15px !important;margin-top: -5px !important;}\
            .box-promo-apps,#mdk-to-top,br.clear{background: #FFF;}\
            .widget-email-app{margin-top: -40px !important;}\
         </sty' + 'le>';
                break;
            case "bola":
                topframe_style_fix = '\
         <sty' + 'le>\
           #div-gpt-ad-bola-topfrm-oop{\
              background:transparent !important;\
           }\
           #main_top {\
               background: #FFF;\
               padding-top: 15px;\
           }\
           .a2{\
               background: #FFF;\
               padding-bottom: 50px;\
               margin-bottom: -25px;\
           }\
         </sty' + 'le>';
                break;
            case "dream":
                topframe_style_fix = '\
         <sty' + 'le>\
            #div-gpt-ad-dream-topfrm-oop{\
              background:none !important;\
            }\
           .navbar{\
               background: #FFF;\
            }\
            .section {\
                background: #FFF;\
            }\
            .container {\
                background: #fff;\
                position: relative;\
            }\
            .footer-travel {\
                margin-top: 0px !important;\
            }\
         </sty' + 'le>';
                break;
            default:
                topframe_style_fix = '\
           <sty' + 'le>\
              #div-gpt-ad-' + domain + '-topfrm-oop{\
                background:none !important;\
              }\
           </sty' + 'le>';
                break;
        }
    }
    topframeFix();
    var topframe_style = '\
    <sty' + 'le>\
    #topframe{\
      position: fixed;\
      overflow: hidden;\
      width: 100%;\
      z-index:0;\
      top : 0;\
    }\
    #topframe-ox{\
      position:relative;\
      text-align:center;\
      width: 100%;\
      height:100%;\
      overflow: hidden;\
      transition: padding .5s .25s;\
      -webkit-transition:padding .5s .25s;\
      -moz-transition: padding .5s .25s;\
      -o-transition: padding .5s .25s;\
      z-index: -1;\
    }\
    #topframe.expand #topframe-ox{\
      transition: padding .5s;\
      -webkit-transition:padding .5s;\
      -moz-transition: padding .5s;\
      -o-transition: padding .5s;\
    }\
    #topframe-img-container-absolute{\
      position: absolute;\
      top:0;\
      left: 0;\
      width: 100%;\
      z-index:-99;\
    }\
    #topframe-img-container{\
      position:fixed;\
      left:0;\
      z-index:-99;\
      width: 100%;\
      overflow: hidden;\
      transform: translate3d(0,0,0);\
      -webkit-transform: translate3d(0,0,0);\
      -moz-transform: translate3d(0,0,0);\
      -o-transform: translate3d(0,0,0);\
      -webkit-transition: top .5s .25s;\
      -moz-transition: top .5s .25s;\
      -o-transition: top .5s .25s;\
      transition: top .5s .25s;\
    }\
    #topframe.expand #topframe-img-container{\
      -webkit-transition: top .5s;\
      -moz-transition: top .5s;\
      -o-transition: top .5s;\
      transition: top .5s;\
    }\
    .topframe-img{\
      position:relative;\
      max-width:100%;\
      margin: 0 auto;\
      display:block;\
    }\
    #topframe-close-btn {\
      background-color: #F44336;\
      color:#fff;\
      height: 42px;\
      padding: 0;\
      margin: 0;\
      font-size: 0;\
      width: 42px;\
      box-sizing: border-box;\
      position: absolute;\
      bottom: -150px;\
      right:0;\
      white-space: nowrap;\
      font-family:arial,sans-serif;\
      z-index: 2;\
      text-align: center;\
      transition: bottom .5s;\
      -webkit-transition:bottom .5s;\
      -moz-transition: bottom .5s;\
      -o-transition: bottom .5s;\
    }\
    #topframe-close-btn:after{\
      content: "";\
      display: inline-block;\
      vertical-align: middle;\
      width: 0;\
      height: 100%;\
      padding: 0;\
      margin: 0;\
      position: relative;\
    }\
    #topframe-close-btn img{\
      width: 18px;\
      display:inline-block;\
      vertical-align:middle;\
    }\
    #topframe.expand #topframe-close-btn{\
      bottom: 0;\
      transition: bottom .5s .25s;\
      -webkit-transition:bottom .5s .25s;\
      -moz-transition: bottom .5s .25s;\
      -o-transition: bottom .5s .25s;\
    }\
    #topframe-desturl{\
      position: absolute;\
      top:0;\
      left:0;\
      width: 100%;\
      z-index:1;\
    }\
    .container.header-menu.text-center {\
        position: relative;\
        background: #fff;\
        width: 100%;\
    }\
    ul.menu-second.list-inline {\
        margin: 0;\
        background: #fff;\
        padding: 0 14px 0 12px;\
    }\
    div#mdk-body {\
        position: relative;\
        background: #fff !important;\
    }\
    .container.add-topframe {\
        position: relative;\
    }\
    div#mdk-body {\
        position: relative;\
        background: #fff !important;\
    }\
    \
    div#mdk-footers {\
        position: relative;\
    }\
    div.container.add-topframe:before {\
        content: "";\
        position: absolute;\
        left: 0;\
        top: -100px;\
        height: 100vh;\
        background: #fff;\
        z-index: -1;\
        width: 100%;\
    }\
    div#topframe-img-wrapper-big-pulse {\
        position: absolute;\
        bottom: 0;\
        left: calc((100% - 150px)/ 2);\
        width: 150px;\
        height: 30px;\
        opacity : .95;\
        z-index: 999;\
    }\
    \
    img#topframe-img-big-pulse {\
        position: absolute;\
        bottom: 0px;\
        left: 0px;\
        width: 100%;\
    }\
    div#topframe-img-wrapper-big-pulse-fake-lp {\
        position: absolute;\
        width: 100%;\
        height: 30px;\
        top: 0px;\
        opacity: .3;\
        border-radius: 10px 10px 0 0;\
    }\
    .oto-menu-v2.text-center ,\
    div#mdk-content ,\
    div#main_top ,\
    .a2 {\
        position: relative;\
        background: #fff;\
    }\
    .mdk-container .navbar {\
        background: #fff;\
    }\
    .wrapper .container{\
        position : relative;\
    }\
    div#topframe img {\
        max-height: unset !important;\
    }\
    .widget-email-app {\
        position: relative;\
        background: #fff;\
        padding: 20px;\
    }\
    \
    div#mdk-to-top {\
        position: relative;\
        background: #fff;\
        padding: 10px;\
        margin-top: -5px;\
    }\
    img#billboard-close {\
        position: absolute;\
        z-index: 999;\
        width: 30px;\
        right: 10px;\
        top: 10px;\
    }\
    div#topframe-img-wrapper-big {\
        position: relative;\
    }\
    div#mdk-content div#detail_news ul.read-comment__nav {\
        margin: 0 !important;\
        padding: 0 !important;\
    }\
    .wrapper-oto.container,\
    div#mdk-content,\
    .main {\
        z-index: 10;\
        position: relative;\
    }\
    .a2 {\
        z-index: 10;\
    }\
    .oto-menu-v2 {\
        position: relative;\
        z-index: 90;\
    }\
    </sty' + 'le>';

    var billScreenWidth = (window.screen.width > window.screen.height) ? window.screen.height : window.screen.width;
    var screenWidth = (billScreenWidth ? billScreenWidth : 480) ;
    var topframe_template = `
        <div id="topframe">
            <div id="topframe-ox">
                <div id="topframe-img-container-absolute">
                    <div id="topframe-img-container">
                        <div id="topframe-img-wrapper-small">
                            <a id="small-lp" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:99;" target="_blank"></a>
                            <iframe src="" id="topframe-img-small" class="topframe-img" frameborder="0" scrolling="no" alt=""></iframe>
                        </div>
                        <div id="topframe-img-wrapper-big">
                            <img src="https://cdns.klimg.com/d.kapanlaginetwork.com/banner/asset/img/close-black-circle.png" alt="" id="billboard-close">
                            <a id="big-lp" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:99;" target="_blank"></a>
                            <iframe src="" id="topframe-img-big" class="topframe-img" frameborder="0" scrolling="no" alt=""></iframe>
                            <div id="topframe-img-wrapper-big-pulse">
                                <img src="https://cdns.klimg.com/d.kapanlaginetwork.com/banner/preview/2019/08/16/lip6_collect_data/minimize.png" id="topframe-img-big-pulse">
                                <div id="topframe-img-wrapper-big-pulse-fake-lp"></div>
                            </div>
                        </div>
                    </div>
                </div>
                    
                    <div id="beacon_topframe" style="position: absolute; left: 0px; top: 0px; visibility: hidden;">
                      <img id="mobileBillboardImpression" src="" style="display:none; visibility:hidden;" width="0" height="0">
                    </div>
                    
            </div>
        </div>

        
    `;

    topframe_template = topframe_style_fix + topframe_style + topframe_template;

    var topframe_script = `
      var dfp_useTracker = true ;
      var dfP_topframeUseCollapse = true ;
      var dfp_topframeLandingPage = (dfp_useTracker) ? "%%CLICK_URL_UNESC%%http://www.bukalapak.com/campaign/NEWBR-KLYRN/?l=https://www.bukalapak.com/promo-detail/bukalapak-bikin-asik-belanja-seharian-gratis-ongkir-20rb&utm_source=KLY&utm_medium=Banner&utm_campaign=BR_TRF_Tactical_LionParcel&utm_term=Brand" : "http://www.bukalapak.com/campaign/NEWBR-KLYRN/?l=https://www.bukalapak.com/promo-detail/bukalapak-bikin-asik-belanja-seharian-gratis-ongkir-20rb&utm_source=KLY&utm_medium=Banner&utm_campaign=BR_TRF_Tactical_LionParcel&utm_term=Brand" ;
      var dfP_topframeImpression = (dfp_useTracker) ? "%%VIEW_URL_UNESC%%https://cdns.klimg.com/d.kapanlaginetwork.com/banner/asset/img/pixel.png" : "https://cdns.klimg.com/d.kapanlaginetwork.com/banner/asset/img/pixel.png" ;
      var dfp_imageBig = "https://cdns.klimg.com/d.kapanlaginetwork.com/banner/preview/2020/05/13/lionparcel-480x530/BL-lion-480x530-1.html?w=`+screenWidth+`";
      var dfp_imageSmall = "https://cdns.klimg.com/d.kapanlaginetwork.com/banner/preview/2020/05/13/lionparcel-480x150/BL-lion-mbillboard-480x150-1.html?w=`+screenWidth+`";
      var dfp_topframeCloseTracker = "";
      var dfp_topframeDMPCat  = 'shopping-and-ecommerce'.trim().split(/\\s*,\\s*/);

      var close_btn_src = "https://cdns.klimg.com/d.kapanlaginetwork.com/banner/asset/img/close.png";

      /*CONST*/
      var topFrameMaxWidth = 480;
      var topFrameClosedMaxHeight = 150;
      var topFrameExpandedMaxHeight = 480;
      var defaultCookieDuration = 10;

      /*REFERENCES*/
      var topFrame = document.getElementById("topframe");
      var topFrameOX = document.getElementById("topframe-ox");
      var topFrameClose = document.getElementById("topframe-img-big-pulse");
      var topFrameImageContainer = document.getElementById("topframe-img-container");
      var topFrameImageContainerAbsolute = document.getElementById("topframe-img-container-absolute");
      var topFrameImageBig = document.getElementById("topframe-img-big");
      var topFrameImageBigFakelp = document.getElementById("topframe-img-wrapper-big-pulse-fake-lp");
      var topFrameImageSmall = document.getElementById("topframe-img-small");
      var topFrameLpBig = document.getElementById("big-lp");
      var topFrameLpSmall = document.getElementById("small-lp");
      var mobileBillboardImpression = document.getElementById("mobileBillboardImpression");

      /*STATE*/
      var deviceOrientation = (window.innerHeight < window.innerWidth ? "landscape" : "portrait");
      var dfp_isTopframeClosed = false;
      var topframeState = "expand";
      var klmain = document.querySelector(".main-kl");
      var klcontainer = document.querySelectorAll(".container");
      var isIos = navigator.platform.match(/iPhone|iPod|iPad/);

      /*CODE*/
      topFrameImageBig.src = dfp_imageBig;
      topFrameImageSmall.src = dfp_imageSmall;
    
      isDiscoveryPage();

      if (klmain) {
          klmain.parentElement.classList.add("add-topframe");
      }

      if (!isIos) {
        topframe.style.zIndex = "-9999";         
      }else{
        klcontainer && klcontainer.forEach(function(v){
                (v.classList.length === 1) ? v.classList.add("add-topframe") : "";
        })
      }

      topframeVisualCallback();

      mobileBillboardImpression.setAttribute("src", dfP_topframeImpression);

      function topframeGenerateDMPLP(){
        if(typeof parent.window.createDMPTracker === 'function'){
          parent.window.createDMPTracker(dfp_topframeDMPCat,dfp_topframeLandingPage);
        }else{
          parent.window.open(dfp_topframeLandingPage, '_blank');
        }  
      }

      function getDomainName() {
          hostName = window.location.hostname;
          rHN = hostName.substring(hostName.lastIndexOf(".", hostName.lastIndexOf(".") - 1) + 1);
          return (rHN == "kapanlaginetwork.com") ? "kapanlagi.com" : rHN;
      }

      function topframeVisualCallback() {
          var orientation = (isIos) ? window.orientation : screen.orientation.angle;
          var heighresponsive = Math.round((topFrameClosedMaxHeight / topFrameMaxWidth * window.innerWidth));
          var billScreenWidth = (window.screen.width > window.screen.height) ? window.screen.height : window.screen.width;
          var screenWidth = (billScreenWidth < 480 ? billScreenWidth : 480) ;
          var rasioH = 480 / 530;
          topFrameImageBig.style.height = (screenWidth / rasioH) + "px";
          topFrameImageBig.style.width = screenWidth + "px";
          topFrameImageSmall.style.height = heighresponsive + "px";
          topFrameImageSmall.style.width = screenWidth + "px";

          if (dfP_topframeUseCollapse) {
             document.getElementById("billboard-close").style.display = 'none';
          }else{
             document.getElementById("topframe-img-wrapper-big-pulse").style.display = 'none';
             document.getElementById("billboard-close").addEventListener("click", function () {
                 TFVSetMarginValue(0);
                 topframeState = "remove";

             })
          }

          if (orientation !== 0) {
              deviceOrientation = "landscape";
          } else {
              deviceOrientation = "portrait";
          }
          if (topframeState == "closed") {
              if (orientation == 0) {
                  TFVSetMarginValue(heighresponsive);
                  topFrameOX.style.height = heighresponsive + "px";
              } else {
                  TFVSetMarginValue(0);
                  topFrameOX.style.height ="0px";
              }
          } else if (topframeState == "expand") {
              if (orientation == 0) {
              	var rasioH = 480 / 530;
                  TFVSetMarginValue(screenWidth / rasioH);
                  topFrameOX.style.height = Math.round(screenWidth / rasioH) + "px";
              } else {
                  TFVSetMarginValue(0);
                  topFrameOX.style.height ="0px";
              }
          }else if(topframeState == "remove"){
                TFVSetMarginValue(0);
          }
          
          var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;

          var topFrameImageContainerTop;
          if (scrollTop > -1) {
              topFrameImageContainer.style.transition = "";
              if (topframeState == "closed") {
                  topFrameImageContainerTop = 0;
              } else if (topframeState == "expand") {
                  if (window.innerWidth < topFrameMaxWidth) {
                      topFrameImageContainerTop = -Math.round((topFrameClosedMaxHeight / topFrameMaxWidth * window.innerWidth));
                  } else {
                      topFrameImageContainerTop = -topFrameClosedMaxHeight;
                  }
              }
          } else {

              topFrameImageContainer.style.transition = "none";
              if (topframeState == "closed") {
                  topFrameImageContainerTop = -scrollTop;
              } else if (topframeState == "expand") {
                  if (window.innerWidth < topFrameMaxWidth) {
                      topFrameImageContainerTop = -scrollTop - Math.round((topFrameClosedMaxHeight / topFrameMaxWidth * window.innerWidth));
                  } else {
                      topFrameImageContainerTop = -scrollTop - topFrameClosedMaxHeight;
                  }
              }
          }

          topFrameImageContainer.style.top = topFrameImageContainerTop + "px";
      }

      function closeTopFrame(e) {
          e ? e.preventDefault() : "";
          topFrame.className = "";
          topframeState = "closed";
          topframeVisualCallback();
          var smallTracker = document.createElement("img");
          smallTracker.style.display = "none";
          smallTracker.src = dfp_topframeCloseTracker;
          document.body.appendChild(smallTracker);
      }

      function expandTopFrame(e) {
          e ? e.preventDefault() : "";
          topFrame.className = "expand";
          topframeState = "expand";
          topframeVisualCallback();
      }

      function showTopFrame() {
        var shareMain = document.querySelector(".share-main");
          if (typeof dfp_IsSledLive != "undefined" && dfp_IsSledLive == false) {
              topframeState = dfp_isTopframeClosed ? "closed" : "expand";
          }
          topFrameImageBig.src = dfp_imageBig;
          topFrameImageSmall.src = dfp_imageSmall;
          console.log(topframeState + " " + dfp_isTopframeClosed);
          if (topframeState == "expand") {
              expandTopFrame();
          } else {
              closeTopFrame();
          }

          topFrameClose.addEventListener("click", function() {
              topframeGenerateDMPLP();
          });

          topFrameLpSmall.addEventListener("click", function() {
              topframeGenerateDMPLP();
          });
          shareMain ? shareMain.classList.add("gam-mobile-billboard_share-main") : '';
      }

      window.addEventListener("orientationchange", function() {
          topframeVisualCallback();
          setTimeout(function() {
              topframeVisualCallback();
          }, 1000);
          topFrameOrientation();

      });

      window.addEventListener("resize", function() {
          topframeVisualCallback();
          setTimeout(function() {
              topframeVisualCallback();
          }, 1000);
      });

      document.addEventListener("scroll", function(e) {
          topframeVisualCallback();
      });

      topFrameLpBig.addEventListener("click", function() {
          topframeGenerateDMPLP();
      });

      topFrameImageBigFakelp.addEventListener("click", closeTopFrame);

      function topFrameOrientation() {
          var ios = navigator.platform.match(/iPhone|iPod|iPad/);
          var orientation = (ios) ? window.orientation : screen.orientation.angle;
          if (orientation == 0) {
              topFrame.style.display = "block";          
          } else {
              topFrame.style.display = "none";
          }

      }

      topFrameOrientation();
      showTopFrame();
      setTimeout(function () {
        topframeVisualCallback();
      }, 1500);

      function TFVSetMarginValue(marginvalue) {
        var sitename = document.location.origin;
        switch (sitename) {
            case "https://m.kapanlagi.com":
                document.getElementsByTagName("body")[0].style.marginTop = marginvalue + "px";
                document.getElementsByTagName("body")[0].style.transition = "margin-top .25s ease";
                break;
            case "https://m.vemale.com":
                document.querySelector(".vemale-header").style.marginTop = marginvalue + "px";
                document.querySelector(".vemale-header").style.transition = "margin-top .25s ease";
                break;
            case "https://m.merdeka.com":
                document.querySelector(".navbar").style.marginTop = marginvalue + "px";
                document.querySelector(".navbar").style.transition = "margin-top .25s ease";
                document.querySelector(".mdk-container").style.overflow = "";
                document.querySelector("#detail_news #mdk-news_img_det") && (document.querySelector("#detail_news #mdk-news_img_det").style.margin = "unset");
                document.querySelector("#detail_news #mdk-news_img_det") && (document.querySelector("#detail_news #mdk-news_img_det").style.padding = "unset");
                document.querySelector("ul.read-comment__nav") && (document.querySelector("ul.read-comment__nav").style.marginRight = "unset");
                document.querySelector("#mbreaking-news") && (document.querySelector("#mbreaking-news") .style.position = "-webkit-sticky");
                break;
            case "https://planet.merdeka.com":
                document.querySelector(".section-merdeka") && (document.querySelector(".section-merdeka").style = "position:relative;margin-top: "+ screen.width +"px;");
                break;
            case "https://m.bola.net":
                document.querySelector("#main_top").style.marginTop = marginvalue + "px";
                document.querySelector("#main_top").style.transition = "margin-top .25s ease";
                break;
            case "https://m.otosia.com":
                document.querySelector(".navbar").style.marginTop = marginvalue + "px";
                document.querySelector(".navbar").style.transition = "margin-top .25s ease";
                break;
            case "https://m.fimela.com":
                document.querySelector("#back-to-top").style.marginTop = marginvalue + "px";
                document.querySelector("#back-to-top").style.transition = "margin-top .25s ease";
                break;
            case "https://m.dream.co.id":
                document.querySelector(".navbar").style.marginTop = marginvalue + "px";
                document.querySelector(".navbar").style.transition = "margin-top .25s ease";
                break;
            case "https://m.bintang.com":
                document.querySelector("#back-to-top").style.marginTop = marginvalue + "px";
                document.querySelector("#back-to-top").style.transition = "margin-top .25s ease";
                document.querySelector(".layout__ads").style.height = "0";
                break;
            case "https://m.bola.com":
                document.querySelector("#back-to-top").style.marginTop = marginvalue + "px";
                document.querySelector("#back-to-top").style.transition = "margin-top .25s ease";
                document.querySelector(".layout__ads").style.height = "0";
                break;
            case "https://m.liputan6.com":
                if (kmklabs.tag != undefined) {
                    document.querySelector(".tags--cover").style.marginTop = marginvalue + "px";
                    document.querySelector(".tags--cover").style.transition = "margin-top .25s ease";
                }else{
                    document.querySelector("#back-to-top").style.marginTop = marginvalue + "px";
                    document.querySelector("#back-to-top").style.transition = "margin-top .25s ease";
                }
                document.querySelector(".layout__ads").style.height = "0";
                break;
            default :
            document.getElementsByTagName("body")[0].style.marginTop = marginvalue + "px";
            document.getElementsByTagName("body")[0].style.transition = "margin-top .25s ease";
            break;
        }
    }

    function isDiscoveryPage(){
        var urlParams = new URLSearchParams(window.location.search);
        var myParam = urlParams.get('discovery');
        if(myParam == "on"){
            window.frameElement.style = "border: none; background: white; overflow-x: hidden; margin-top: 57px; height : calc(100vh - 57px)";
        }
    }

    if (document.querySelector(".topics--tab")) {
        document.querySelector(".topics--tab").setAttribute("class", "topics--tab");
    }

   
    `;


    /*get frame*/
    var iframeEl = window.frameElement;

    //get frame parent
    var iframeParentEl = iframeEl.parentElement;

    //create popup element to containing skinad template
    var containerEl = document.createElement('div');
    containerEl.innerHTML = topframe_template;
    containerEl.style.position = 'absolute';
    containerEl.style.zIndex = '0';
    containerEl.style.width = '100%';

    //add skinad element to parent frame
    iframeParentEl.appendChild(containerEl);

    //create container for skinad script
    var containerScript = document.createElement('script');
    containerScript.setAttribute('type', 'text/javascript');

    //assign script to script container, note in firefox innerText not available so use textContent instead
    if (typeof containerScript.innerText == 'undefined') {

        containerScript.textContent = topframe_script;

    } else
        containerScript.innerText = topframe_script;

    //add popup script  container to skinad element
    containerEl.appendChild(containerScript);
    var iframeTFEl = window.frameElement;
    iframeTFEl.style.display = "none";
</script>